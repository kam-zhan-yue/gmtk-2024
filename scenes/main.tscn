[gd_scene load_steps=20 format=3 uid="uid://bt2ju64bl0yrp"]

[ext_resource type="Script" path="res://scripts/flow/game_manager.gd" id="1_vt02a"]
[ext_resource type="Script" path="res://scripts/flow/camera_controller.gd" id="2_ra8cm"]
[ext_resource type="Script" path="res://scripts/flow/spawner.gd" id="3_b1w3c"]
[ext_resource type="PackedScene" uid="uid://gwlgluwanmdk" path="res://scenes/player.tscn" id="3_h8ik1"]
[ext_resource type="Script" path="res://scripts/flow/start_spawner.gd" id="7_5dx1o"]
[ext_resource type="AudioStream" uid="uid://u7jl40fk83o4" path="res://audio/music/bgm.mp3" id="8_1hva6"]
[ext_resource type="Script" path="res://scripts/boids/boid_spawner.gd" id="8_egxth"]
[ext_resource type="PackedScene" uid="uid://beiyw255u1oxm" path="res://scenes/ui/ui.tscn" id="8_uw3fq"]
[ext_resource type="PackedScene" uid="uid://cuu4wvac46q6j" path="res://scenes/enemies/fish.tscn" id="9_rtuln"]
[ext_resource type="Shader" path="res://scripts/shaders/distortion.gdshader" id="12_cd0p2"]
[ext_resource type="PackedScene" uid="uid://dtbawr3acmc0s" path="res://scenes/background.tscn" id="12_dvr37"]
[ext_resource type="Script" path="res://scripts/flow/timeline.gd" id="12_xvfn4"]
[ext_resource type="Texture2D" uid="uid://b58a50e60p4fd" path="res://icon.svg" id="13_pujpn"]

[sub_resource type="Environment" id="Environment_bgy46"]
background_mode = 3
glow_enabled = true
glow_strength = 1.21
glow_blend_mode = 0
glow_hdr_threshold = 2.0
glow_hdr_luminance_cap = 3.0

[sub_resource type="FastNoiseLite" id="FastNoiseLite_jf1mw"]
noise_type = 3

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_auxj2"]
seamless = true
noise = SubResource("FastNoiseLite_jf1mw")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_aaysv"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_deji5"]
seamless = true
noise = SubResource("FastNoiseLite_aaysv")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_f1hch"]
shader = ExtResource("12_cd0p2")
shader_parameter/distortion_strength = 0.00500005
shader_parameter/offset1 = Vector2(0.1, 0.1)
shader_parameter/offset2 = Vector2(0.2, 0.2)
shader_parameter/noise_texture1 = SubResource("NoiseTexture2D_auxj2")
shader_parameter/noise_texture2 = SubResource("NoiseTexture2D_deji5")

[node name="MainScene" type="Node2D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_bgy46")

[node name="Background" parent="." instance=ExtResource("12_dvr37")]
position = Vector2(1, -934)

[node name="Start" type="Marker2D" parent="Background"]
unique_name_in_owner = true
position = Vector2(0, 793)

[node name="Submarine" type="Marker2D" parent="Background"]
unique_name_in_owner = true
position = Vector2(-1, -19)

[node name="HotAirBalloon" type="Marker2D" parent="Background"]
unique_name_in_owner = true
position = Vector2(-1, -228)

[node name="UI" parent="." instance=ExtResource("8_uw3fq")]
unique_name_in_owner = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="Distortion" type="Sprite2D" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_f1hch")
position = Vector2(1.5, -391.5)
scale = Vector2(4.71094, 6.00781)
texture = ExtResource("13_pujpn")

[node name="GameManager" type="Node2D" parent="."]
script = ExtResource("1_vt02a")

[node name="Spawner" type="Node2D" parent="GameManager"]
unique_name_in_owner = true
script = ExtResource("3_b1w3c")

[node name="StartSpawner" type="Node2D" parent="GameManager"]
script = ExtResource("7_5dx1o")

[node name="BoidSpawner1" type="Node2D" parent="GameManager/StartSpawner"]
position = Vector2(-176, -256)
script = ExtResource("8_egxth")
boid_scene = ExtResource("9_rtuln")
start_direction = Vector2(1, -0.2)
spawn_radius = 150.0
spawn_count = 25
spawn_on_ready = false

[node name="BoidSpawner2" type="Node2D" parent="GameManager/StartSpawner"]
position = Vector2(172, -397)
script = ExtResource("8_egxth")
boid_scene = ExtResource("9_rtuln")
start_direction = Vector2(-1, 0.2)
spawn_radius = 150.0
spawn_count = 25
spawn_on_ready = false

[node name="MusicPlayer" type="AudioStreamPlayer2D" parent="GameManager"]
unique_name_in_owner = true
stream = ExtResource("8_1hva6")
volume_db = -20.0
bus = &"Music"

[node name="Timeline" type="Node2D" parent="GameManager"]
script = ExtResource("12_xvfn4")

[node name="CameraController" type="Camera2D" parent="GameManager/Timeline"]
unique_name_in_owner = true
position = Vector2(0, -300)
zoom = Vector2(3.21, 3.21)
script = ExtResource("2_ra8cm")

[node name="Player" parent="." instance=ExtResource("3_h8ik1")]
unique_name_in_owner = true
position = Vector2(0, -138)
